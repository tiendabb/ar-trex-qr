<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>T-Rex AR</title>
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body, html { margin:0; padding:0; background:#000; color:white; font-family:Arial; }
    #error { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; text-align:center; }
    button { padding:15px 30px; font-size:1.5em; background:#f44; color:white; border:none; border-radius:10px; margin-top:20px; }
    #ar-scene { display:none; width:100%; height:100%; }
  </style>
</head>
<body>

  <!-- Mensaje de error o bot칩n -->
  <div id="error">
    <h2>游꿘 Acceso a la c치mara requerido</h2>
    <p>Este sitio necesita la c치mara para mostrar Realidad Aumentada.</p>
    <button id="start-btn">游녤 TOCAR PARA INICIAR</button>
  </div>

  <!-- Escena AR -->
  <div id="ar-scene">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-asset-item id="trex" src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@master/examples/image-tracking/nft/trex/trex.glb"></a-asset-item>

      <a-marker type="qr" value="trex-animado">
        <a-entity
          position="0 0 0"
          scale="2 2 2"
          rotation="0 180 0"
          gltf-model="#trex"
          animation="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear"
        ></a-entity>
        <a-text value="춰T-Rex!" color="lime" position="0 1.5 0"></a-text>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>
  </div>

  <script>
    document.getElementById('start-btn').onclick = function () {
      // Intentar acceder a la c치mara
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
          // 칄xito: mostrar AR
          stream.getTracks().forEach(track => track.stop()); // cerrar temporal
          document.getElementById('error').style.display = 'none';
          document.getElementById('ar-scene').style.display = 'block';
        })
        .catch(err => {
          console.error("Error al acceder a la c치mara:", err);
          alert("No se pudo acceder a la c치mara. Aseg칰rate de usar HTTPS y permisos activados.");
        });
    };
  </script>
</body>
</html>
